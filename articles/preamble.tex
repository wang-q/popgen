
\usepackage[a4paper, top=1in, bottom=1.25in, left=1in, right=1in]{geometry}

\usepackage{amssymb,amsmath}
\usepackage{upgreek} % upright greek symbols

% xetex 西文字体
% https://www.reddit.com/r/typography/comments/2vzkad/a_good_serif_webfont_to_pair_with_fira_sans_thats/
\usepackage{fontspec,xltxtra,xunicode}
    \setmainfont[BoldFont={Charter Bold}, ItalicFont={Charter Italic}]{Charter}
    \setmonofont{Fira Mono}

% 中文字体
\usepackage{xeCJK}
    \setCJKmainfont[BoldFont={Songti SC Bold}, ItalicFont={Kaiti SC Regular}]{Songti SC Regular}
    \xeCJKsetup{CJKecglue = {\hskip 0pt plus 0.08\baselineskip}, xCJKecglue = {false}}
    \punctstyle{plain}

% don't move this line above
\defaultfontfeatures{Mapping=tex-text,Scale=MatchLowercase}

% Line spacing
\linespread{1.5}

% make inline codes smaller
%\renewenvironment{texttt}{\small}{}
\renewcommand{\texttt}[1]{{\small\ttfamily #1}}

% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
    \usepackage{microtype}
    \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
    }{}

% citations
% https://www.sharelatex.com/learn/Biblatex_citation_styles
\usepackage[
    backend=biber,
    style=chicago-authordate,
    url=false,
    doi=false,
    isbn=false,
    maxcitenames=2,
    maxbibnames=40,
    abbreviate=true
]{biblatex}
\addbibresource{popgen.bib}
% http://tex.stackexchange.com/questions/150710/ignore-a-bibliography-field-e-g-urldate-for-eliminating-of-biblatex-biber-w
\DeclareSourcemap{
    \maps[datatype=bibtex]{
        \map[overwrite=true]{
            \step[fieldset=urldate, null]
            \step[fieldset=language, null]
            \step[fieldset=month, null]
            \step[fieldset=day, null]
        }
    }
}

\usepackage[unicode=true]{hyperref}
\urlstyle{same}  % don't use monospace font for urls

\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}

\usepackage{parskip}
\setlength{\parindent}{2em}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
    \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
%\setcounter{secnumdepth}{0} % will prevent numbering for sections

% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
    \let\oldparagraph\paragraph
    \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
    \let\oldsubparagraph\subparagraph
    \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

%%% custom settings

% subcaption
% http://tex.stackexchange.com/questions/125579/subcaption-with-beamer
\usepackage[compatibility=false]{caption}
\usepackage{subcaption}

% chemistry
\usepackage[version=3]{mhchem}

\usepackage{nomencl}
\makenomenclature

\usepackage{etoolbox}

% Itemize left margin
\usepackage{enumitem}

\usepackage{tikz}
\usetikzlibrary{arrows,positioning,calc,decorations.pathreplacing,decorations.pathmorphing}
